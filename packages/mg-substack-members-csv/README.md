# Substack Ghost Csv Converter

Converts the CSV export from Substack to a CSV compatible with Ghost.

## Install

`npm install @tryghost/mg-substack-members-csv --save`

or

`yarn add @tryghost/mg-substack-members-csv`

## Usage

To run a Substack CSV migration, the required command is:

```sh
migrate substack-members path/to/emails.csv
```

To convert paid subscriptions, add `--subs` with a second file path:

```sh
migrate substack-members path/to/emails.csv --subs path/to/members.csv
```

It's possible to pass more options, in order to achieve a better migration file for Ghost:

- **`-V` `--verbose`**
    - bool - default: `false`
    - Show verbose output
- **`-s` `--subs`**
    - string - default: `null`
    - Path to the subscribers CSV file (paid, comp, gift) as generated by Substack ("Subscribers")
- **`-l` `--limit`**
    - int - default: `6000`
    - Define the batch limit for import files
- **`--comp`**
    - string - default: `10`
    - choices: `['none', 'free', 'number of years']`
    - Decide what to do with subscribers on the `comp` plan. Provide a threshold number for lifelong complimentary plans. Subscribers with a `comp` plan above this threshold will get the lifelong complimentary plan
- **`--compLabel`**
    - string - default: `substack-comp`
    - Provide a label for Substack `comp` subscribers
- **`--gift`**
    - string - default: `10`
    - choices: `['none', 'free', 'number of years']`
    - Decide what to do with subscribers on the `gift` plan. Provide a threshold number for lifelong complimentary plans. Subscribers with a `comp` plan above this threshold will get the lifelong complimentary plan
- **`--giftLabel`**
    - string - default: `substack-gift`
    - Provide a label for Substack `gift` subscribers
- **`--freeLabel`**
    - string - default: `substack-free`
    - Provide a label for Substack free subscribers
- **`--paidLabel`**
    - string - default: `substack-paid`
    - Provide a label for Substack paid subscribers

A more complex migration command that accounts for Stripe data could look like this:

```sh
migrate substack-members emails.csv --subs members.csv --giftLabel Gifted --freeLabel Free --paidLabel Supporter --compLabel Try\ It\ Out
```

## Develop

This is a mono repository, managed with [lerna](https://lerna.js.org/).

Follow the instructions for the [top-level repo](https://github.com/TryGhost/migrate).
1. `git clone` this repo & `cd` into it as usual
2. Run `yarn` to install top-level dependencies.

### Run

To run a local development copy, `cd` into this directory, and replace `migrate` with `yarn dev`, like so:

```sh
yarn dev substack-members path/to/posts.csv
```

## Test

- `yarn lint` run just eslint
- `yarn test` run lint and tests

# Copyright & License

Copyright (c) 2013-2020 Ghost Foundation - Released under the [MIT license](https://github.com/TryGhost/migrate/blob/master/packages/mg-substack-members/LICENSE).
